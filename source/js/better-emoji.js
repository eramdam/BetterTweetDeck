function betterEmoji(){
	function ca(r){for(var t="",n=0;n<r.length;n++)t+="\\u"+("000"+r[n].charCodeAt(0).toString(16)).substr(-4);return t}
	function cp(t){for(var n=[],r=0,o=0,h=0;h<t.length;)r=t.charCodeAt(h++),o?(n.push((65536+(o-55296<<10)+(r-56320)).toString(16)),o=0):r>=55296&&56319>=r?o=r:n.push(r.toString(16));return n.join("-")}
	var emoji = '👩‍👩‍👦‍👦|👨‍👩‍👦‍👦|👨‍👨‍👦‍👦|👨‍👨‍👧‍👦|👩‍👩‍👧‍👧|👨‍👨‍👧‍👧|👩‍❤️‍💋‍👩|👨‍❤️‍💋‍👨|👩‍👩‍👧‍👦|👨‍👩‍👧‍👦|👨‍👩‍👧‍👧|👩‍❤️‍👩|👩👩👦👦|👨‍❤️‍👨|👨👨👧👧|👨👨👧👦|👩👩👧👦|👨‍👨‍👧|👨‍👨‍👦|👨‍👩‍👧|👩‍👩‍👧|👩👩👧👧|👨👩👧👦|👩‍👩‍👦|👨👩👦👦|👨👨👦👦|👨👩👧👧|👨❤💋👨|👩❤💋👩|👨👩👧|👩👩👧|👩👩👦|👨👨👦|👨👨👧|️👆🏽|️👆🏿|️👆🏾|️👌🏻|👨❤👨|👩❤👩|️👆🏼|️👆🏻|️👌🏿|️👌🏾|️👌🏽|️👌🏼|👁‍🗨|🇬🇱|👌🏻|🙌🏼|👌🏼|🙌🏽|👌🏽|🙌🏾|👌🏾|🙌🏿|👌🏿|🇫🇮|🇫🇯|🇫🇴|🇫🇰|🇪🇺|👐🏻|👐🏼|👐🏽|👐🏾|👐🏿|💪🏻|💪🏼|💪🏽|💪🏾|💪🏿|🙏🏻|🙏🏼|🙏🏽|🙏🏾|🙏🏿|🇿🇼|☝️🏻|🇪🇹|☝️🏼|🇪🇪|☝️🏽|🇪🇷|☝️🏾|🇬🇶|☝️🏿|🇸🇻|🇪🇬|👏🏻|👆🏻|👏🏼|👆🏼|👏🏽|👆🏽|👏🏾|👆🏾|👏🏿|👆🏿|👇🏻|👇🏼|👇🏽|👇🏾|👇🏿|👈🏻|👈🏼|👈🏽|👈🏾|👈🏿|👉🏻|👉🏼|👉🏽|👉🏾|👉🏿|🖕🏻|🖕🏼|🖕🏽|🖕🏾|🖕🏿|🖐🏻|🖐🏼|🖐🏽|🖐🏾|🖐🏿|🤘🏻|🤘🏼|🤘🏽|🤘🏾|🤘🏿|🖖🏻|🖖🏼|🖖🏽|🖖🏾|🖖🏿|🇿🇲|🇪🇨|🇩🇴|🇩🇲|🇩🇯|🇩🇰|💅🏻|💅🏼|💅🏽|💅🏾|💅🏿|👂🏻|👂🏼|👂🏽|👂🏾|👂🏿|👃🏻|👃🏼|👃🏽|👃🏾|👃🏿|👶🏻|👶🏼|👶🏽|👶🏾|👶🏿|👦🏻|👦🏼|👦🏽|👦🏾|👦🏿|👧🏻|👧🏼|👧🏽|👧🏾|👧🏿|👨🏻|👨🏼|👨🏽|👨🏾|👨🏿|👩🏻|👩🏼|👩🏽|👩🏾|👩🏿|👱🏻|👱🏼|👱🏽|👱🏾|👱🏿|👴🏻|👴🏼|👴🏽|👴🏾|👴🏿|👵🏻|👵🏼|👵🏽|👵🏾|👵🏿|👲🏻|👲🏼|👲🏽|👲🏾|👲🏿|👳🏻|👳🏼|👳🏽|👳🏾|👳🏿|👮🏻|👮🏼|👮🏽|👮🏾|👮🏿|👷🏻|👷🏼|👷🏽|👷🏾|👷🏿|💂🏻|💂🏼|💂🏽|💂🏾|💂🏿|🎅🏻|🎅🏼|🎅🏽|🎅🏾|🎅🏿|👼🏻|👼🏼|👼🏽|👼🏾|👼🏿|👸🏻|👸🏼|👸🏽|👸🏾|👸🏿|👰🏻|👰🏼|👰🏽|👰🏾|👰🏿|🚶🏻|🚶🏼|🚶🏽|🚶🏾|🚶🏿|🏃🏻|🏃🏼|🏃🏽|🏃🏾|🏃🏿|💃🏻|💃🏼|💃🏽|💃🏾|💃🏿|🙇🏻|🙇🏼|🙇🏽|🙇🏾|🙇🏿|💁🏻|💁🏼|💁🏽|💁🏾|💁🏿|🙅🏻|🙅🏼|🙅🏽|🙅🏾|🙅🏿|🙆🏻|🙆🏼|🙆🏽|🙆🏾|🙆🏿|🙋🏻|🙋🏼|🙋🏽|🙋🏾|🙋🏿|🙎🏻|🙎🏼|🙎🏽|🙎🏾|🙎🏿|🙍🏻|🙍🏼|🙍🏽|🙍🏾|🙍🏿|💇🏻|💇🏼|💇🏽|💇🏾|💇🏿|💆🏻|💆🏼|💆🏽|💆🏾|💆🏿|👋🏻|👋🏼|👋🏽|👋🏾|👋🏿|👍🏻|👍🏼|👍🏽|👍🏾|👍🏿|👎🏻|👎🏼|👎🏽|👎🏾|👎🏿|👊🏻|👊🏼|👊🏽|👊🏾|👊🏿|🇬🇷|🇬🇮|🇬🇭|🇩🇪|🇬🇪|✌️🏻|🇬🇲|✌️🏼|🙌🏻|🇬🇦|✌️🏽|🇹🇫|✌️🏾|🇵🇫|✌️🏿|🇬🇫|🇾🇪|🇪🇭|🇼🇫|🇨🇿|🇻🇳|🇻🇪|🇻🇦|🇨🇾|🇻🇺|🇨🇼|🇺🇿|🇺🇾|🇺🇸|🇬🇧|🇦🇪|🇺🇦|🇺🇬|🇻🇮|🇹🇻|🇹🇨|🇹🇲|🇹🇷|🇹🇳|🇹🇹|🚣🏻|🚣🏼|🚣🏽|🚣🏾|🚣🏿|🏊🏻|🏊🏼|🏊🏽|🏊🏾|🏊🏿|🏄🏻|🏄🏼|🏄🏽|🏄🏾|🏄🏿|🛀🏻|🛀🏼|🛀🏽|🛀🏾|🛀🏿|🇹🇴|🇨🇺|🇭🇷|🇨🇮|🇨🇷|🇨🇰|🏋🏻|🏋🏼|🏋🏽|🏋🏾|🏋🏿|🚴🏻|🚴🏼|🚴🏽|🚴🏾|🚴🏿|🚵🏻|🚵🏼|🚵🏽|🚵🏾|🚵🏿|🏇🏻|🏇🏼|🏇🏽|🏇🏾|🏇🏿|🇹🇰|🇹🇬|🇹🇱|🇹🇭|🇹🇿|🇹🇯|🇹🇼|🇸🇾|🇨🇭|🇸🇪|🇸🇿|🇸🇷|🇸🇩|🇻🇨|🇵🇲|🇱🇨|🇰🇳|🇸🇭|🇧🇱|🇱🇰|🇪🇸|🇸🇸|🇰🇷|🇿🇦|🇸🇴|🇸🇧|🇬🇸|🇸🇮|🇸🇰|🇸🇽|🇸🇬|🇸🇱|🇸🇨|🇷🇸|🇸🇳|🇸🇦|🇸🇹|🇸🇲|🇼🇸|🇷🇼|🇷🇺|🇷🇴|🇷🇪|🇶🇦|🇵🇷|🇵🇹|🇵🇱|🇵🇳|🇵🇭|🇵🇪|🇵🇾|🇵🇬|🇵🇦|🇵🇸|🇵🇼|🇵🇰|🇴🇲|🇳🇴|🇨🇩|🇨🇬|🇰🇲|🇲🇵|🇰🇵|🇳🇫|🇨🇴|🇨🇨|🇨🇽|🇳🇺|🇳🇬|🇳🇪|🇳🇮|🇳🇿|🇳🇨|🇳🇱|🇳🇵|🇳🇷|🇳🇦|🇲🇲|🇲🇿|🇲🇦|🇲🇸|🇨🇳|🇨🇱|🇲🇪|🇲🇳|🇲🇨|🇲🇩|🇫🇲|🇲🇽|🇹🇩|🇾🇹|🇨🇫|🇰🇾|🇧🇶|🇨🇻|🇮🇨|🇨🇦|🇨🇲|🇰🇭|🇧🇮|🇧🇫|🇧🇬|🇧🇳|🇲🇺|🇲🇷|🇲🇶|🇲🇭|🇲🇹|🇲🇱|🇲🇻|🇲🇾|🇲🇼|🇲🇬|🇲🇰|🇲🇴|🇱🇺|🇱🇹|🇱🇮|🇱🇾|🇱🇷|🇱🇸|🇱🇧|🇱🇻|🇱🇦|🇰🇬|🇰🇼|🇽🇰|🇰🇮|🇰🇪|🇻🇬|🇮🇴|🇰🇿|🇯🇴|🇯🇪|🇯🇵|🇯🇲|🇮🇹|🇮🇱|🇮🇲|🇮🇪|🇮🇶|🇮🇷|🇮🇩|🇮🇳|🇮🇸|🇭🇺|🇭🇰|🇭🇳|🇭🇹|🇬🇾|🇬🇼|🇬🇳|🇬🇬|🇧🇷|🇧🇼|🇬🇹|🇬🇺|🇬🇵|🇬🇩|🇫🇷|👁🗨|🇦🇫|🇦🇽|🇦🇱|🇩🇿|🇦🇸|🇦🇩|🇦🇴|🇦🇮|🇦🇶|🇦🇬|🇦🇷|🇦🇲|🇦🇼|🇦🇺|🇦🇹|🇦🇿|🇧🇸|🇧🇭|🇧🇩|🇧🇧|🇧🇾|🇧🇪|🇧🇿|🇧🇯|🇧🇲|🇧🇹|🇧🇴|🇧🇦|️🌥|️♠️|*️⃣|#️⃣|9️⃣|8️⃣|7️⃣|6️⃣|5️⃣|4️⃣|3️⃣|2️⃣|1️⃣|0️⃣|️🚰|🅿️|🈂️|️💹|🈯️|🅾️|🅱️|🅰️|🈷️|️🈸|🈚️|⛹🏿|⛹🏾|⛹🏽|⛹🏼|⛹🏻|🀄️|️🌤|️🌟|✍🏿|✍🏾|✍🏽|✍🏼|✍🏻|️👆|☝🏿|☝🏾|☝🏽|☝🏼|☝🏻|✋🏿|✋🏾|✋🏽|✋🏼|✋🏻|️👌|✌🏿|✌🏾|✌🏽|✌🏼|✌🏻|✊🏿|✊🏾|✊🏽|✊🏼|✊🏻|🙅|☁️|👍|🌧|😌|🌩|⚡️|💂|🔥|💥|❄️|👉|🌨|☃️|😍|⛄️|😘|🌬|💨|🌪|🌫|☂️|😗|☔️|😙|💧|💦|🌊|🍏|🍎|🍐|🍊|🍋|🍌|🍉|🍇|🍓|🍈|🍒|🍑|🍍|🍅|🍆|🌶|🌽|🍠|🍯|🍞|🧀|🍗|🍖|🍤|🍳|🍔|🍟|🌭|🍕|🍝|🌮|🌯|🍜|🍲|🍥|🍣|🍱|🍛|🍙|🍚|🍘|🍢|🍡|🍧|🍨|🍦|🍰|🎂|🍮|🍬|🍭|🍫|🍿|🍩|🍪|🍺|🍻|🍷|🍸|🍹|🍾|🍶|🍵|☕️|🕵|🍼|🍴|🍽|⚽️|🎅|🏀|🏈|⚾️|👎|🎾|🏐|🏉|🎱|⛳️|🖕|🏌|🏓|🏸|🏒|🏑|🏏|🎿|😚|🏂|😜|🏹|🎣|🚣|😝|👼|😛|🤑|🖐|🏊|👊|🤓|👸|😎|🤗|🏄|😏|🤘|😶|👰|🏽|🛀|😐|😑|😒|🖖|🚶|🙄|🤔|✌️|🏼|😳|🏃|🏋|😞|😟|😠|😡|😔|🚴|💃|😕|💅|🙁|☹️|🚵|🏾|👯|👫|👬|👭|🏇|🙇|😣|👌|👄|👅|🕴|🏆|🎽|🏅|🎖|🎗|🏵|🎫|🎟|🎭|🎨|🎪|🎤|🎧|🎼|🎹|🎷|🎺|🎸|🎻|🎬|🎮|👾|🎯|🎲|🎰|🎳|🚗|🚕|🚙|🚌|🚎|🏎|🚓|🚑|🚒|🚐|🚚|🚛|🚜|🏍|🚲|🚨|🚔|🚍|🚘|🚖|🚡|🚠|🚟|🚃|🚋|🚝|🚄|🚅|🚈|🚞|🚂|🚆|🚇|🚊|🚉|🚁|🛩|✈️|👂|🛫|🛬|⛵️|💁|🛥|🚤|😖|🛳|🚀|🛰|💺|⚓️|😫|🚧|⛽️|😩|🚏|🚦|🚥|🏁|🚢|🎡|🎢|🎠|🏗|🌁|🗼|🏭|⛲️|😤|🎑|😮|🏔|🗻|🌋|🗾|🏕|⛺️|😬|🏞|🛣|🛤|🌅|🌄|🏜|🏖|🏝|🌇|🌆|🏙|🌃|🌉|🌌|🌠|🎇|🎆|🌈|🏘|🏰|🏯|🏟|🗽|🏠|🏡|🏚|🏢|🏬|🏣|🏤|🏥|🏦|🏨|🏪|🏫|🏩|💒|🏛|⛪️|👃|🕌|🕍|🕋|😱|⌚️|😨|📱|📲|💻|😰|🖥|🖨|🖱|🖲|🕹|🗜|💽|💾|💿|📀|📼|📷|📸|📹|🎥|📽|🎞|📞|☎️|😯|📟|📠|📺|📻|🎙|🎚|🎛|🙆|😦|👁|🕰|👀|⌛️|👤|📡|🔋|🔌|💡|🔦|🕯|🗑|🛢|💸|💵|💴|💶|💷|💰|💳|💎|👥|🔧|🔨|🙋|🛠|🗣|🔩|👶|🏻|🔫|💣|🔪|🗡|😧|🛡|🚬|😢|🙎|😥|🏺|🔮|📿|💈|😪|🔭|🔬|🕳|💊|💉|🌡|🏷|🔖|🚽|🚿|🛁|🔑|🗝|🛋|🛌|🛏|🚪|🛎|🖼|🗺|👦|🗿|🛍|🎈|🎏|🎀|🎁|🎊|🎉|🎎|🎐|🎌|🏮|✉️|😓|📩|📨|📧|💌|📮|📪|📫|📬|📭|📦|📯|📥|📤|📜|📃|📑|📊|📈|📉|📄|📅|📆|🗓|📇|🗃|🗳|🗄|📋|🗒|📁|📂|🗂|🗞|📰|📓|📕|📗|📘|📙|📔|📒|📚|📖|🔗|📎|🖇|✂️|👐|📐|📏|📌|📍|🚩|🏳|🏴|🔐|🔒|🔓|🔏|🖊|🖋|✒️|🙍|📝|✏️|😭|🖍|🖌|🔍|🔎|❤️|😵|💛|💚|💙|💜|💔|❣️|😲|💕|💞|💓|💗|💖|💘|💝|💟|👧|✝️|🤐|💇|🕉|😷|✡️|💪|🔯|🕎|☯️|🤒|🤕|🛐|👨|♈️|💆|♉️|😴|♊️|💤|♋️|💩|♌️|🙏|♍️|😈|♎️|💑|♏️|👩|♐️|👿|♑️|👹|♒️|👺|♓️|💏|🆔|💀|🈳|🈹|☝️|👱|📴|📳|🈶|👻|🈚|👪|🈸|🈺|👽|🈷|✴️|🤖|🆚|🉑|💮|🉐|㊙️|😺|㊗️|😸|🈴|🈵|🈲|👴|🅰|😹|🅱|🆎|🆑|😻|🅾|🆘|⛔️|😼|📛|🚫|😽|⭕️|🙀|💢|♨️|👵|🚷|🚯|🚳|🚱|🔞|📵|❗️|😿|😾|👆|🙌|‼️|😀|⁉️|👲|💯|🔅|🔆|🔱|😁|〽️|😂|⚠️|😃|🚸|🔰|♻️|😄|👏|🈯|👳|💹|❇️|😅|✳️|😆|😇|👇|💠|🌀|😉|🌐|Ⓜ️|👚|🏧|👕|🈂|🛂|🛃|🛄|🛅|♿️|👖|🚭|🚾|👔|🅿|👗|🚰|🚹|🚺|🚼|🚻|🚮|🎦|📶|🈁|🆖|🆗|🆙|🆒|🆕|🆓|👙|0⃣|👘|1⃣|💄|2⃣|💋|3⃣|👣|4⃣|👠|5⃣|👡|6⃣|👢|7⃣|👞|8⃣|👟|9⃣|🔟|🔢|▶️|👒|🎩|🎓|👑|👮|🎒|👝|👛|👜|🔀|🔁|🔂|◀️|💼|🔼|🔽|👓|🕶|➡️|💍|⬅️|🌂|⬆️|🐶|⬇️|🐱|↗️|🐭|↘️|🐹|↙️|🐰|↖️|🐻|↕️|🐼|↔️|🐨|🔄|↪️|🐯|↩️|🦁|⤴️|🐮|⤵️|🐷|🐽|#⃣|🐸|*⃣|ℹ️|🐙|🔤|🔡|🔠|🔣|🎵|🎶|〰️|🐵|🙈|✔️|🙉|🔃|🙊|🐒|🐔|✖️|🐧|💲|💱|©️|🐦|®️|🐤|™️|🐣|🔚|🔙|🔛|🔝|🔜|☑️|🐥|🔘|⚪️|🐺|⚫️|🐗|🔴|🔵|🔸|🔹|🔶|🔷|🔺|▪️|🐴|▫️|🦄|⬛️|🐝|⬜️|🐛|🔻|◼️|🐌|◻️|🐞|◾️|🐜|◽️|🕷|🔲|🔳|🔈|🔉|🔊|🔇|📣|📢|🔔|🔕|🃏|🦂|🀄|🦀|♠️|🐍|♣️|🐢|♥️|🐠|♦️|🐟|🎴|🐡|🐬|💭|🗯|💬|🕐|🕑|🕒|🕓|🕔|🕕|🕖|🕗|🕘|🕙|🕚|🕛|🕜|🕝|🕞|🕟|🕠|🕡|🕢|🕣|🕤|🕥|🕦|🕧|🐳|🐋|🐊|🐆|🐅|🐃|🐂|🐄|🐪|🐫|🐘|🐐|🐏|🐑|🐎|🐖|🐀|🐁|🐓|🦃|🕊|🐕|🐩|🐈|🐇|🐿|🐾|🐉|🐲|🌵|🎄|🌲|🌳|🌴|🌱|🌿|😊|🍀|🎍|🎋|🍃|🍂|🍁|🌾|🌺|🌻|🌹|🌷|🌼|🌸|💐|🍄|🌰|🎃|🐚|🕸|🌎|🌍|🌏|🌕|🌖|🌗|🌘|🌑|🌒|🌓|🌔|🌚|🌝|🌛|🌜|🌞|🌙|⭐️|👋|🙂|🌟|💫|🙃|👈|☀️|👷|☺️|🌤|⛅️|🏿|😋|🌥|🌦|🗨|♦|♣|♠|◽|◾|◻|◼|⬜|⬛|▫|▪|⚫|⚪|☑|™|®|©|✖|➗|➖|➕|✔|➰|〰|ℹ|⤵|⤴|↩|↪|↔|↕|↖|↙|↘|↗|⬇|⬆|⬅|➡|⏬|⏫|◀|⏪|⏩|⏮|⏭|⏺|⏹|⏯|⏸|▶|♿|Ⓜ|➿|✅|❎|✳|❇|♻|⚠|〽|⚜|⁉|‼|❔|❓|❕|❗|♨|⭕|❌|⛔|㊗|㊙|✴|☣|☢|⚛|♓|♒|♑|♥|♏|♎|♍|♌|♋|♊|♉|♈|⛎|☦|☯|✡|☸|☪|✝|☮|❣|❤|✏|✒|✂|✉|⛱|⚗|⚱|⚰|☠|⚔|⛓|⚙|⛏|⚒|⚖|⌛|⏳|⏰|⏲|⏱|☎|⌨|⌚|⛩|⛪|⛺|⛰|⛲|⛽|⚓|⛴|⛵|✈|⛹|⛸|⛷|⛳|⚾|⚽|☕|☔|☂|⛄|☃|❄|⚡|⛈|☁|⛅|☀|☄|✨|⭐|☘|⛑|✍|☝|✋|✌|✊|☹|☺|♐'.split('|');
	var regx_arr=[];
	for (var i = 0; i < emoji.length; i++) {
		regx_arr.push(ca(emoji[i]));
	};
	var re = new RegExp('(' + regx_arr.join('|') + ')', 'g');
	regx_arr = null;
	function minEmoji(s){
		return s.replace(re, function (a, b) {
			return '<span class="bte bte-'+cp(b.replace(/\ufe0f|\u200d/gm, ''))+'"></span>';
		});
	}
	TD.emoji.parse = minEmoji;
}